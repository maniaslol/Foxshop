(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-28de"],{3574:function(t,a,s){},"4f50":function(t,a,s){"use strict";s.r(a);var o=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",[s("loading",{attrs:{active:t.isLoading},on:{"update:active":function(a){t.isLoading=a}}}),s("div",{staticClass:"text-right"},[s("button",{staticClass:"btn btn-primary my-3",on:{click:t.getCarts}},[s("i",{attrs:{"data-feather":"shopping-cart"}}),t._v("購物車")])]),s("div",{staticClass:"row"},t._l(t.products,function(a,o){return s("div",{key:o,staticClass:"col-md-4 mb-3"},[s("div",{staticClass:"card h-100 border-info"},[s("router-link",{attrs:{to:"/admin/oneProduct/"+a.id}},[s("div",{staticStyle:{height:"150px","background-position":"center","background-repeat":"no-repeat"},style:{backgroundImage:"url("+a.image+")"},attrs:{alt:"Card image cap"}})]),s("div",{staticClass:"card-body text-center mt-auto"},[s("h5",{staticClass:"card-title text-left"},[t._v(t._s(a.title))]),s("p",{staticClass:"card-text text-left"},[s("del",{staticClass:"text-left"},[t._v("NT"+t._s(t._f("moneyFilter")(a.origin_price)))])]),s("p",{staticClass:"card-text text-left"},[t._v("NT"+t._s(t._f("moneyFilter")(a.price)))]),s("button",{staticClass:"btn btn-outline-info w-100",attrs:{href:"#"},on:{click:function(s){t.getOneProduct(a)}}},[s("i",{attrs:{"data-feather":"shopping-cart"}}),t._v(" 點選搶購")])])],1)])})),s("div",{staticClass:"modal fade",attrs:{id:"productModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[s("div",{staticClass:"modal-dialog modal-lg",attrs:{role:"document"}},[s("div",{staticClass:"modal-content border-0"},[t._m(0),s("div",{staticClass:"modal-body"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-md-6"},[s("div",{staticClass:"card h-100 border-info"},[s("div",{staticStyle:{height:"300px","background-position":"center","background-repeat":"no-repeat"},style:{backgroundImage:"url("+t.oneProduct.image+")"},attrs:{alt:"Card image cap"}})])]),s("div",{staticClass:"col-md-6"},[s("div",{staticClass:"form-group"},[s("h2",{staticClass:"text-left"},[t._v(t._s(t.oneProduct.title))]),s("p",{staticClass:"text-left"},[s("del",{staticClass:"text-left"},[t._v("NT"+t._s(t._f("moneyFilter")(t.oneProduct.origin_price)))])]),s("h3",[t._v("產品描述")]),s("hr"),s("p",[t._v(t._s(t.oneProduct.content))]),s("hr"),s("p",{staticClass:"card-text text-left"},[t._v("NT"+t._s(t._f("moneyFilter")(t.oneProduct.price)))]),s("div",{staticClass:"btn-group"},[s("button",{staticClass:"btn btn-secondary",on:{click:t.cartNumMinus}},[s("i",{attrs:{"data-feather":"minus"}})]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.shopCartNum,expression:"shopCartNum"}],attrs:{type:"number"},domProps:{value:t.shopCartNum},on:{input:function(a){a.target.composing||(t.shopCartNum=a.target.value)}}}),s("button",{staticClass:"btn btn-secondary",on:{click:t.cartNumPlus}},[s("i",{attrs:{"data-feather":"plus"}})])])])])])]),s("div",{staticClass:"modal-footer"},[s("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button","data-dismiss":"modal"}},[t._v("取消")]),s("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(a){t.addCart(t.oneProduct.id,t.shopCartNum)}}},[t._v("新增至購物車")])])])])]),s("div",{staticClass:"modal fade",attrs:{id:"shopCart",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[s("div",{staticClass:"modal-dialog modal-lg",attrs:{role:"document"}},[s("div",{staticClass:"modal-content border-0"},[t._m(1),s("div",{staticClass:"modal-body"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-md-6"}),s("div",{staticClass:"col-md-12"},[s("table",{staticClass:"table"},[s("tbody",[t._l(t.shopCartList,function(a,o){return s("tr",{key:o},[s("td",[s("button",{staticClass:"btn btn-outline-danger",on:{click:function(s){t.removeCart(a.id)}}},[t._v("刪除")])]),s("td",[s("a",{attrs:{href:"#"},on:{click:function(s){s.preventDefault(),t.getOneProduct(a.product)}}},[s("div",{staticStyle:{height:"48px",width:"56px","background-position":"center","background-repeat":"no-repeat"},style:{backgroundImage:"url("+a.product.image+")"},attrs:{alt:"Card image cap"}})])]),s("td",[t._v(t._s(a.product.title))]),s("td",[t._v("數量:"+t._s(a.qty))]),s("td",{staticClass:"text-right"},[t._v("NT"+t._s(t._f("moneyFilter")(a.product.price)))]),s("td",{staticClass:"text-right"},[t._v("NT"+t._s(t._f("moneyFilter")(a.product.price*a.qty)))])])}),0!=t.total?s("tr",{staticClass:"w-100"},[s("td",[t._v("總價")]),s("td",{staticClass:"text-right",attrs:{colspan:"5"}},[t._v(t._s(t._f("moneyFilter")(t.total)))])]):t._e(),s("tr",[t.total!=t.final_total?s("td",{staticClass:"text-success"},[t._v("優惠價")]):t._e(),t.total!=t.final_total?s("td",{staticClass:"text-right text-success",attrs:{colspan:"5"}},[t._v(t._s(t._f("moneyFilter")(t.final_total)))]):t._e()])],2)])])])]),s("div",{staticClass:"modal-footer"},[t._m(2),s("div",{staticClass:"form-group inline"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.couponCode,expression:"couponCode"}],staticClass:"form-control",attrs:{type:"text",id:"coupon",placeholder:"優惠券代碼"},domProps:{value:t.couponCode},on:{input:function(a){a.target.composing||(t.couponCode=a.target.value)}}})]),s("div",{staticClass:"form-group inline"},[s("button",{staticClass:"btn btn-outline-success",attrs:{type:"button"},on:{click:function(a){t.useCoupon()}}},[t._v("套用優惠券")]),s("button",{staticClass:"btn btn-outline-secondary ml-2",attrs:{type:"button","data-dismiss":"modal"}},[t._v("取消")]),s("button",{staticClass:"btn btn-primary ml-2",attrs:{type:"button"},on:{click:t.toChickOut}},[t._v("確認購買")])])])])])])],1)},e=[function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"modal-header bg-dark text-white"},[s("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLabel"}},[s("span",[t._v("新增至購物車")])]),s("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[s("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"modal-header bg-dark text-white"},[s("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLabel"}},[s("span",[t._v("購物車")])]),s("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[s("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"form-group inline"},[s("label",{attrs:{for:"coupon"}},[t._v("使用優惠券:")])])}],i=(s("a481"),s("1157")),n=s.n(i),r=(s("bf06"),{data:function(){return{products:[],oneProduct:[],shopCartNum:1,shopCartList:[],couponCode:"",total:"",final_total:"",pagination:{},isNew:!1,isLoading:!1,LoadingIcon:!1}},methods:{getProducts:function(){var t="https://vue-course-api.hexschool.io/api/manias/products",a=this;a.isLoading=!0,this.$http.get(t).then(function(t){a.products=t.data.products,a.products.reverse(),a.pagination=t.data.pagination,a.isLoading=!1})},getOneProduct:function(t){n()("#shopCart").modal("hide"),console.log();var a="https://vue-course-api.hexschool.io/api/manias/product/".concat(t.id),s=this;s.isLoading=!0,this.$http.get(a).then(function(t){s.oneProduct=t.data.product,s.isLoading=!1,n()("#productModal").modal("show")})},getCarts:function(){var t="https://vue-course-api.hexschool.io/api/manias/cart",a=this;this.$http.get(t).then(function(t){console.log(t.data),a.shopCartList=t.data.data.carts,a.total=t.data.data.total,a.final_total=t.data.data.final_total,n()("#shopCart").modal("show")})},addCart:function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;n()("#productModal").modal("hide"),console.log(t,a);var s="https://vue-course-api.hexschool.io/api/manias/cart",o=this,e={product_id:t,qty:a};this.$http.post(s,{data:e}).then(function(t){console.log(t.data),o.getCarts(),n()("#shopCart").modal("show")})},removeCart:function(t){console.log(t);var a="https://vue-course-api.hexschool.io/api/manias/cart/".concat(t),s=this;this.$http.delete(a).then(function(t){console.log(t.data),s.getCarts(),n()("#shopCart").modal("show")})},useCoupon:function(){var t="https://vue-course-api.hexschool.io/api/manias/coupon",a=this,s=a.couponCode;console.log(s),this.$http.post(t,{data:{code:s}}).then(function(t){console.log(t.data),a.getCarts()})},cartNumPlus:function(){var t=this;t.shopCartNum=parseInt(t.shopCartNum)+1},cartNumMinus:function(){var t=this;t.shopCartNum<=1||(t.shopCartNum=parseInt(t.shopCartNum)-1)},toChickOut:function(){n()("#shopCart").modal("hide"),this.$router.push("/admin/checkOut")}},created:function(){this.getProducts()},updated:function(){feather.replace()},mounted:function(){}}),c=r,l=(s("86b5"),s("2877")),d=Object(l["a"])(c,o,e,!1,null,null,null);d.options.__file="productSimulation.vue";a["default"]=d.exports},"86b5":function(t,a,s){"use strict";var o=s("3574"),e=s.n(o);e.a}}]);
//# sourceMappingURL=chunk-28de.6a16416a.js.map